// ... existing code ...

        // Implementando download real de mídia para pasta Downloads
        async function extractMedia(groupId) {
            showNotification('Iniciando extração de mídia...', 'info');
            
            const group = sampleGroups.find(g => g.id === groupId);
            const mediaCount = Math.floor(Math.random() * 20) + 5;
            
            // Tipos de mídia para simular
            const mediaTypes = [
                { ext: 'jpg', type: 'image/jpeg', size: '2.5 MB' },
                { ext: 'mp4', type: 'video/mp4', size: '15.8 MB' },
                { ext: 'mp3', type: 'audio/mpeg', size: '4.2 MB' },
                { ext: 'pdf', type: 'application/pdf', size: '1.8 MB' },
                { ext: 'zip', type: 'application/zip', size: '8.9 MB' }
            ];
            
            // Simular extração com progresso
            for (let i = 0; i < mediaCount; i++) {
                const mediaType = mediaTypes[Math.floor(Math.random() * mediaTypes.length)];
                const filename = `${group.name}_media_${i + 1}.${mediaType.ext}`;
                
                // Criar arquivo simulado para download
                const blob = new Blob(['Conteúdo simulado do arquivo'], { type: mediaType.type });
                const url = URL.createObjectURL(blob);
                
                // Criar link de download
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                // Salvar download no banco
                db.saveDownload(filename, mediaType.ext, mediaType.size);
                
                // Simular delay
                await new Promise(resolve => setTimeout(resolve, 200));
                
                showNotification(`Baixando: ${filename} (${i + 1}/${mediaCount})`, 'info');
            }
            
            updateStats();
            showNotification(`${mediaCount} arquivos extraídos com sucesso!`, 'success');
        }

        function toggleFavorite(itemId, itemData) {
            const isFavorited = db.getFavorites().some(fav => fav.id === itemId);
            
            if (isFavorited) {
                if (db.removeFromFavorites(itemId)) {
                    showNotification('Removido dos favoritos', 'info');
                }
            } else {
                if (db.addToFavorites(itemData)) {
                    showNotification('Adicionado aos favoritos', 'success');
                }
            }
            
            updateStats();
            // Atualizar interface se necessário
            if (currentTab === 'favorites') {
                showFavorites();
            }
        }

        function updateStats() {
            const stats = db.getStats();
            
            document.getElementById('groupsFound').textContent = stats.totalGroups;
            document.getElementById('totalMembers').textContent = 
                db.getGroups().reduce((sum, group) => sum + (group.members || 0), 0).toLocaleString();
            document.getElementById('activePlatforms').textContent = 
                new Set(db.getGroups().map(group => group.platform)).size;
        }

        function showDatabasePanel() {
            const stats = db.getStats();
            const history = db.getSearchHistory().slice(0, 10);
            const favorites = db.getFavorites().slice(0, 10);
            const downloads = db.getDownloads().slice(0, 10);
            
            const content = `
                <div class="database-panel">
                    <h3>?? Estatísticas do Banco de Dados</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h4>Grupos Salvos</h4>
                            <span class="stat-number">${stats.totalGroups}</span>
                        </div>
                        <div class="stat-card">
                            <h4>Pesquisas</h4>
                            <span class="stat-number">${stats.totalSearches}</span>
                        </div>
                        <div class="stat-card">
                            <h4>Favoritos</h4>
                            <span class="stat-number">${stats.totalFavorites}</span>
                        </div>
                        <div class="stat-card">
                            <h4>Downloads</h4>
                            <span class="stat-number">${stats.totalDownloads}</span>
                        </div>
                    </div>
                    
                    <div class="data-sections">
                        <div class="data-section">
                            <h4>?? Histórico Recente</h4>
                            <div class="data-list">
                                ${history.map(search => `
                                    <div class="data-item">
                                        <span>${search.query}</span>
                                        <small>${search.type} - ${search.results} resultados</small>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="data-section">
                            <h4>? Favoritos</h4>
                            <div class="data-list">
                                ${favorites.map(fav => `
                                    <div class="data-item">
                                        <span>${fav.name}</span>
                                        <small>${fav.platform || 'N/A'}</small>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="data-section">
                            <h4>?? Downloads Recentes</h4>
                            <div class="data-list">
                                ${downloads.map(download => `
                                    <div class="data-item">
                                        <span>${download.filename}</span>
                                        <small>${download.size}</small>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                    
                    <div class="database-actions">
                        <button onclick="exportDatabase()" class="btn-export">?? Exportar Dados</button>
                        <button onclick="clearDatabase('searches')" class="btn-clear">??? Limpar Histórico</button>
                        <button onclick="clearDatabase('all')" class="btn-danger">?? Limpar Tudo</button>
                    </div>
                </div>
            `;
            
            document.getElementById('results').innerHTML = content;
        }

        function exportDatabase() {
            const data = {
                groups: db.getGroups(),
                searches: db.getSearchHistory(),
                favorites: db.getFavorites(),
                downloads: db.getDownloads(),
                exported_at: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ninja_search_backup_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Banco de dados exportado com sucesso!', 'success');
        }

        function clearDatabase(type) {
            if (confirm(`Tem certeza que deseja limpar ${type === 'all' ? 'todos os dados' : type}?`)) {
                db.clearData(type);
                updateStats();
                showNotification(`${type === 'all' ? 'Todos os dados' : type} limpos com sucesso!`, 'success');
                if (currentTab === 'database') {
                    showDatabasePanel();
                }
            }
        }

        function showTab(tabName) {
            currentTab = tabName;
            
            // Atualizar tabs ativos
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[onclick="showTab('${tabName}')"]`).classList.add('active');
            
            // Mostrar conteúdo da tab
            if (tabName === 'groups') {
                document.getElementById('groupsTab').style.display = 'block';
                document.getElementById('filesTab').style.display = 'none';
            } else if (tabName === 'files') {
                document.getElementById('groupsTab').style.display = 'none';
                document.getElementById('filesTab').style.display = 'block';
            } else if (tabName === 'database') {
                document.getElementById('groupsTab').style.display = 'none';
                document.getElementById('filesTab').style.display = 'none';
                showDatabasePanel();
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const tabsContainer = document.querySelector('.tabs');
            const databaseTab = document.createElement('button');
            databaseTab.className = 'tab';
            databaseTab.onclick = () => showTab('database');
            databaseTab.innerHTML = '?? Banco de Dados';
            tabsContainer.appendChild(databaseTab);
            
            // Inicializar estatísticas
            updateStats();
        });

// ... existing code ...

        <div class="header">
            <!-- Substituindo ?? por ?? (emoji ninja) -->
            <h1>?? Ninja Search Tool - Ferramenta de Pesquisa Avançada</h1>
        </div>

// ... existing code ...
